!function(a){"use strict";var b,c,d="";_wpPluploadSettings.defaults.multipart_params.admin_page="import";var e={init:function(){a("body");d=a(".cp-import-overlay"),a(document).on("click","#cp-edit-dropdown a.cp-export-action",this._export),a(document).on("click",".cp-edit-settings",this._assignID),a(document).on("click",".cp-import-btn",this._import)},_import:function(a){if(a.preventDefault(),b=wp.media.frames.file_frame=wp.media({title:"Upload Your Exported file",button:{text:"Upload"},library:{type:"application/zip"},multiple:!1}),b.on("select",function(){console.log("on file select"),c=b.state().get("selection").first().toJSON();var a=c;jQuery(".message");d.show(),jQuery("body").css("overflow","hidden"),e.ajaxCall({action:"cp_import_design",file:a},e._importComplete)}),b)return void b.open()},_importComplete:function(b){console.log(b),a("body").addClass("cp-loaded"),b.data.error||(window.location=b.data.edit_url)},_export:function(){a(".cp_export_form").submit()},_assignID:function(){var b=a(this),c=a("#cp-edit-dropdown"),d=b.closest(".cp-row").data("id");console.log(b),"undefined"!=typeof d&&c.find(".cp_export_form input[name=popup_id]").val(d)},ajaxCall:function(b,c){a.ajax({data:b,action:b.action,url:cp_import_export.url,success:c,method:"post",success:c})}};a(function(){e.init()})}(jQuery);